# Mini GitHub

–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –º–∏–Ω–∏-–≤–æ–ø–ª–æ—â–µ–Ω–∏–µ GitHub —Å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ React 18 + Vite + Tailwind –∏ –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ Node.js 20 + Express + TypeScript. –í—Å–µ –¥–∞–Ω–Ω—ã–µ –∏ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ (`./data`).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üîê **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** email + –ø–∞—Ä–æ–ª—å, bcrypt, JWT –≤ HttpOnly cookies, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/–≤—ã—Ö–æ–¥, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ refresh-—Ç–æ–∫–µ–Ω–∞–º–∏.
- üìÅ **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** —Å–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É, —Ä–æ–ª–∏ owner/collaborator.
- üå≥ **Git-–æ–ø–µ—Ä–∞—Ü–∏–∏:** –≤–µ—Ç–∫–∏, checkout, –∫–æ–º–º–∏—Ç—ã, –¥–µ—Ä–µ–≤–æ —Ñ–∞–π–ª–æ–≤, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Monaco Editor, –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä diff, –∑–∞–≥—Ä—É–∑–∫–∞ ZIP.
- üë• **–ö–æ–ª–ª–∞–±–æ—Ä–∞—Ü–∏—è:** —Å–ø–∏—Å–æ–∫ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∞–º–∏, –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø—Ä–∞–≤.
- üìä **UI:** —Ç–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º—ã, –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å 360/768/1024/1440, –º–æ–±–∏–ª—å–Ω–∞—è –Ω–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è, –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏ (S ‚Äî —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, N ‚Äî –Ω–æ–≤—ã–π —Ñ–∞–π–ª).
- üìú **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** OpenAPI (Swagger UI –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `/api/docs`).
- üß™ **–ö–∞—á–µ—Å—Ç–≤–æ:** ESLint + Prettier, Vitest, Supertest, Playwright e2e, Husky pre-commit.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```
frontend/  # React + Vite + Tailwind + Zustand + Monaco
backend/   # Express + isomorphic-git + zod + pino
docs/      # –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã
```

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ

```bash
pnpm install
pnpm dev
```

- –§—Ä–æ–Ω—Ç–µ–Ω–¥: http://localhost:5173
- API: http://localhost:8000 (health-check: `/api/health`)

## –û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π (UI)

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–µ—Ç–∫–∞ `main`).
3. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–≤–∫–ª–∞–¥–∫–∞ Branches –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ –≤ Code).
4. –û—Ç–∫—Ä–æ–π—Ç–µ `Code` ‚Üí —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª (–≥–æ—Ä—è—á–∞—è –∫–ª–∞–≤–∏—à–∞ `N` –∏–ª–∏ –∫–Ω–æ–ø–∫–∞ `+`) ‚Üí —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ (`S`).
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ diff (–ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Diff).
6. –ó–∞–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É `Commits`, –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–º–º–∏—Ç, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ diff.
7. –°–∫–∞—á–∞–π—Ç–µ ZIP –Ω—É–∂–Ω–æ–π –≤–µ—Ç–∫–∏ (–∫–Ω–æ–ø–∫–∞ ¬´–°–∫–∞—á–∞—Ç—å ZIP¬ª).

## –°–∫—Ä–∏–Ω—à–æ—Ç—ã

–°–Ω–∏–º–∫–∏ —ç–∫—Ä–∞–Ω–æ–≤ –¥–ª—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è –≤—ã–Ω–µ—Å–µ–Ω—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, —á—Ç–æ–±—ã —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å Git.
–ò—Ö –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±—Ä–∞—É–∑–µ—Ä–∞ (—Ä–µ–∂–∏–º –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞) –∏ —Å—Ü–µ–Ω–∞—Ä–∏—è –∏–∑
—Ä–∞–∑–¥–µ–ª–∞ ¬´–û—Å–Ω–æ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π (UI)¬ª –≤—ã—à–µ.

## –ü—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞

| –ö–æ–º–∞–Ω–¥–∞ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| --- | --- |
| `pnpm lint` | Lint —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –∏ –±—ç–∫–µ–Ω–¥–∞ (ESLint + Prettier) |
| `pnpm test` | Vitest + Supertest + Playwright e2e |
| `pnpm build` | Vite build + `tsc -p` –¥–ª—è –±—ç–∫–µ–Ω–¥–∞ |
| `pnpm start` | –ó–∞–ø—É—Å–∫ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ backend (Express + –≤—ã–¥–∞—á–∞ —Å—Ç–∞—Ç–∏–∫–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞) |

### –î–µ—Ç–∞–ª–∏ —Ç–µ—Å—Ç–æ–≤

- **Unit/Integration:** Vitest (`backend/src/tests`, `frontend` –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
- **API:** Supertest (—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, login, CRUD —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, git-–æ–ø–µ—Ä–∞—Ü–∏–∏).
- **E2E:** Playwright (`backend/src/tests/e2e/api.e2e.spec.ts`) ‚Äî –ø–æ–ª–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π API.

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–º. `.env.example`:

```
PORT=8000
FRONTEND_URL=http://localhost:5173
JWT_SECRET=—Å–µ–∫—Ä–µ—Ç >= 32 —Å–∏–º–≤–æ–ª–∞
REPOS_ROOT=./data
```

## –§–∞–π–ª–æ–≤–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

```
/data
  /users/users.json
  /auth/refresh-tokens.json
  /repos/{ownerId}/{slug}/
    repo.json
    .git/
  /audit/log.ndjson
```

- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –∑–∞–ø–∏—Å–∏ (tmp + rename), –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ (`proper-lockfile`), –±—ç–∫–∞–ø—ã `.bak`.
- Git-–æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `isomorphic-git`.

## Docker

–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker build -t mini-github .
docker run -p 8000:8000 -v $(pwd)/data:/app/data mini-github
```

–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç Express –Ω–∞ `:8000`, —Ä–∞–∑–¥–∞—ë—Ç —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏–∑ `/frontend/dist`, —Å–æ–∑–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É `/app/data`. HEALTHCHECK ‚Üí `GET /api/health`.

## Husky

`pnpm prepare` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Husky. –ü—Ä–µ—Ö—É–∫ –∑–∞–ø—É—Å–∫–∞–µ—Ç `pnpm lint`.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ FS

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤ + –º—å—é—Ç–µ–∫—Å—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –¢–µ—Å—Ç—ã (`backend/src/tests/repo.test.ts`) —Å–æ–∑–¥–∞—é—Ç —Ä–µ–ø–æ –∏ –∫–æ–º–º–∏—Ç—è—Ç —Ñ–∞–π–ª, e2e –ø—Ä–æ–≥–æ–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ git-–æ–ø–µ—Ä–∞—Ü–∏–∏. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –∑–∞—â–∏—â–µ–Ω–∞ —á–µ—Ä–µ–∑ `proper-lockfile`.

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- Swagger UI: http://localhost:8000/api/docs
- –õ–æ–≥–∏: Pino (`logs` –≤ stdout).
- Audit trail: `data/audit/log.ndjson` (—Ñ–æ—Ä–º–∞—Ç NDJSON).

–£–¥–∞—á–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏! üöÄ
